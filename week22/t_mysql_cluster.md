## ARTS

### Tip

## 聚集和非聚集索引

简单概括： 
* 聚集索引就是以**主键**创建的索引 
* 非聚集索引就是以**非主键**创建的索引 

区别： 
* 聚集索引在叶子节点存储的是**表中的数据** 
* 非聚集索引在叶子节点存储的是**主键和索引列** 
* 使用非聚集索引查询出数据时，**拿到叶子上的主键再去查到想要查找的数据**。(拿到主键再查找这个过程叫做**回表**) 

**非聚集索引也叫做二级索引**，不用纠结那么多名词，将其等价就行了~ 
非聚集索引在建立的时候也**未必是单列**的，可以多个列来创建索引。 
 
* 此时就涉及到了哪个列会走索引，哪个列不走索引的问题了(最左匹配原则-->后面有说) 
* **创建多个单列(非聚集)索引的时候，会生成多个索引树**(所以过多创建索引会占用磁盘空间)

 ![图片](https://uploader.shimo.im/f/tkO41m0fUbksRk1v.png!thumbnail)

在创建多列索引中也涉及到了一种特殊的索引-->**覆盖索引** 
* 我们前面知道了，如果不是聚集索引，叶子节点存储的是主键+列值 
* 最终还是要“回表”，也就是要通过主键**再**查找一次。这样就会比较慢 
* 覆盖索引就是把要**查询出的列和索引是对应的**，不做回表操作！ 

比如说： 
* 现在我创建了索引(username,age)，在查询数据的时候：select username , age from user where username = 'Java3y' and age = 20。 
* 很明显地知道，我们上边的查询是走索引的，并且，**要查询出的列在叶子节点都存在**！所以，就不用回表了~ 
* 所以，能使用覆盖索引就尽量使用吧~

作者：Java3y
链接：[https://juejin.im/post/5b55b842f265da0f9e589e79](https://juejin.im/post/5b55b842f265da0f9e589e79)



